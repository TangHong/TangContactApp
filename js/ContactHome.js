var ipad = ipad || {};(function($) {	// --------- Component Interface Implementation --------- //	function ContactHome() {			}	ContactHome.prototype.create = function(data, config) {		var c = this;		var favorites = [];		var homeContacts = {};		var recentDays = getRecentDays();		var recentOpts = {							moreThan:{recent:recentDays},							orderBy:"id",							orderType:"desc",							pageSize:6						 };				return brite.dm.list("Contact",{equal:{favorite:"1"}}).pipe(function(favorites) {			return brite.dm.list("Contact",recentOpts).pipe(function(recent) {				homeContacts.favorites = favorites;				homeContacts.recent = recent;								var context = {homeList:homeContacts}				var source = $("#tmpl-ContactHome").html();				var template = Handlebars.compile(source);				var html = template(context);				var $e = $(html);				return $e;			})		});	}		ContactHome.prototype.init = function(data, config) {	}		ContactHome.prototype.postDisplay = function() {		var c = this;		var $e = c.$element;				$e.find(".collapse").collapse();				$e.delegate(".fav-add","click",function() {			var data = {};			data.ops = {notEqual:{favorite:"1"}};						var dfd = brite.display("SelectContact",data, {						parent : $workspace			});							dfd.done(function(dialog) {				dialog.onAnswer(function(result) {					if(result.length > 0) {						for(i=0;i<result.length;i++) {							var objId = result[i];							setFavorite(objId);						}						}				})			})					})						$e.delegate("[data-action='fav-del']","click",function() {			var objId = $(this).closest(".con-bar").attr("data_obj-id");			remFavorite(objId);			brite.display("ContactList",null,{				parent:$(".contact-container")			});		})			}		// --------- /Component Interface Implementation --------- //	// --------- Component Private Methods --------- //	function setFavorite(objId) {		var contact = {};		contact.favorite = 1;		brite.dm.update("Contact",objId,contact).done(function() {			brite.display("ContactHome",null,{				parent:$(".right-container")			})			});	}		function remFavorite(objId) {		var contact = {};		contact.favorite = 0;		brite.dm.update("Contact",objId,contact).done(function() {			brite.display("ContactHome",null,{				parent:$(".right-container")			});		});	}			function getRecentDays() {		var oneDay = 1000*60*60*24;		var date = new Date();		var time = date.getTime();		var days = Math.floor(time/oneDay);		return days-7;	}			// --------- /Component Private Methods --------- //		// --------- Component Registration --------- //	brite.registerComponent("ContactHome", {        emptyParent : true,        loadTemplate: true    }, function() {        return new ContactHome();    });		// --------- /Component Registration --------- //})(jQuery);